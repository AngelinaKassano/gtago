// src/app/steam/page.tsx
'use client';

import { useEffect, useState } from 'react';
import Link from 'next/link';
import Sidebar from '@/app/components/sidebar';

export default function SteamDealsPage() {
  const [recentlyViewed, setRecentlyViewed] = useState<{ title: string; url: string }[]>([]);
  const [userTags, setUserTags] = useState<Record<string, number>>({});

  useEffect(() => {
    const saved = localStorage.getItem('recentlyViewed');
    if (saved) setRecentlyViewed(JSON.parse(saved));

    const tags = localStorage.getItem('userTags');
    if (tags) setUserTags(JSON.parse(tags));
  }, []);

  const steamDeals = [
    {
      id: 'frostpunk-2',
      title: 'Frostpunk 2 ‚Äî —Å–∫–∏–¥–∫–∞ 50%',
      excerpt: '–£—Ö, 11 bit studios —Å–Ω–æ–≤–∞ –≤—ã–ø—É—Å–∫–∞—é—Ç –∏–≥—Ä—É –≤ –º–æ—ë–º –ª—é–±–∏–º–æ–º –∂–∞–Ω—Ä–µ ¬´—Ü–µ–π—Ç–Ω–æ—Ç¬ª. –°–Ω–æ–≤–∞ –≤–µ–∑–¥–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ä—É–∫, —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–µ—Ä–≤–æ–≤ —É –∂–∏—Ç–µ–ª–µ–π –±–∞–∑—ã –∏ —É –∏–≥—Ä–æ–∫–∞ —Å–∞–º–æ–≥–æ...',
      content: `–£—Ö, 11 bit studios —Å–Ω–æ–≤–∞ –≤—ã–ø—É—Å–∫–∞—é—Ç –∏–≥—Ä—É –≤ –º–æ—ë–º –ª—é–±–∏–º–æ–º –∂–∞–Ω—Ä–µ ¬´—Ü–µ–π—Ç–Ω–æ—Ç¬ª. –°–Ω–æ–≤–∞ –≤–µ–∑–¥–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ä—É–∫, —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–µ—Ä–≤–æ–≤ —É –∂–∏—Ç–µ–ª–µ–π –±–∞–∑—ã –∏ —É –∏–≥—Ä–æ–∫–∞ —Å–∞–º–æ–≥–æ. –ù–æ –¥–æ —á–µ–≥–æ –∂–µ –∫–∞–π—Ñ–æ–≤–æ! –õ–µ—Ç –¥–µ—Å—è—Ç—å –Ω–∞–∑–∞–¥, –∫–æ–≥–¥–∞ –≤ Steam –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤—ã—Ö–æ–¥–∏–ª –æ—á–µ—Ä–µ–¥–Ω–æ–π –≤—ã–∂–∏–≤–∞—á –≤ —Ä–∞–Ω–Ω–µ–º –¥–æ—Å—Ç—É–ø–µ, —è –≤—Å—ë –Ω–∏–∫–∞–∫ –Ω–µ –º–æ–≥ –Ω–∞–π—Ç–∏ —Ç–æ—Ç —Å–∞–º—ã–π –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫—Ä–æ–µ—Ç –≤—Å–µ –º–æ–∏ —Ö–æ—Ç–µ–ª–∫–∏. –ù–æ —Å–µ–π—á–∞—Å, –ø–æ—Ö–æ–∂–µ, –º–æ–∂–Ω–æ —É–∂–µ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ª–∏—á–Ω–æ –¥–ª—è –º–µ–Ω—è –æ–Ω —É–∂–µ –≤—ã—à–µ–ª.

–ö–æ–Ω–µ—á–Ω–æ, —ç—Ç–æ —Ä–∞–∑–≤–∏—Ç–∏–µ –º–µ—Ö–∞–Ω–∏–∫ Frostpunk, –Ω–æ —Å —É–ø–æ—Ä–æ–º –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π. –î–∞, –∏ —Ä–∞–Ω—å—à–µ –±—ã–ª–∏ —ç–≤–µ–Ω—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ ¬´–∏–º–µ–Ω–Ω—ã–º–∏¬ª –≥–µ—Ä–æ—è–º–∏, –Ω–æ —Ç–µ–ø–µ—Ä—å —É NPC —Å—Ç–æ–ª—å–∫–æ –æ–±—â–µ–≥–æ —Å –≥–ª–∞–≤–Ω—ã–º –≥–µ—Ä–æ–µ–º, —á—Ç–æ –∫—Ä–∏–∫–∏ –≤ —ç–∫—Ä–∞–Ω ¬´—ç—Ç–æ—Ç —á–µ–ª –±—É–∫–≤–∞–ª—å–Ω–æ —è¬ª –Ω–µ–∏–∑–±–µ–∂–Ω—ã.

–ü–æ–∫–∞ —á—Ç–æ –≤—Å—ë –Ω—Ä–∞–≤–∏—Ç—Å—è, –Ω–æ —è –±—ã —Å–¥–µ–ª–∞–ª —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –æ–¥–Ω–æ–π –º—ã—à–∫–æ–π, –∞ –Ω–µ –Ω–∞ —Å–≤–æ–∏—Ö –¥–≤–æ–∏—Ö ‚Äî —É–∂ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è —É—é—Ç–∞ –∏ —ç—Ä–≥–æ–Ω–æ–º–∏–∫–∏. –í –æ—Å—Ç–∞–ª—å–Ω–æ–º ‚Äî –æ—á–µ—Ä–µ–¥–Ω–æ–π –ø—Ä–µ—Ç–µ–Ω–¥–µ–Ω—Ç –Ω–∞ –Ω–∞–≥—Ä–∞–¥—ã –≤ –∫–æ–Ω—Ü–µ –≥–æ–¥–∞! –ë—É–¥—É –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏–≥—Ä–∞—Ç—å, –æ–±–Ω–æ–≤–ª—é –æ—Ç–∑—ã–≤ –±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É –∏–≥—Ä—ã.`,
      author: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
      date: '15 –æ–∫—Ç—è–±—Ä—è 2024',
      image: 'https://cdn.akamai.steamstatic.com/steam/apps/2438840/header.jpg?t=1727639136',
      tags: ['—Å—Ç—Ä–∞—Ç–µ–≥–∏—è', '11 bit studios', '–ø–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å'],
    },
    {
      id: 'gta-5',
      title: 'GTA 5 ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏',
      excerpt: '–í—á–µ—Ä–∞ —Å–æ—Å—Ç–æ—è–ª–∞—Å—å –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –≥–µ–π–º–ø–ª–µ—è Grand Theft Auto VI. –ù–∞ –≤–∏–¥–µ–æ –ø–æ–∫–∞–∑–∞–ª–∏ –í–∞–π—Å-–°–∏—Ç–∏, –Ω–æ–≤—ã—Ö –≥–µ—Ä–æ–µ–≤ –∏ —Å–∏—Å—Ç–µ–º—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å NPC...',
      content: `–í—á–µ—Ä–∞ —Å–æ—Å—Ç–æ—è–ª–∞—Å—å –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –≥–µ–π–º–ø–ª–µ—è Grand Theft Auto VI. –ù–∞ –≤–∏–¥–µ–æ –ø–æ–∫–∞–∑–∞–ª–∏ –í–∞–π—Å-–°–∏—Ç–∏, –Ω–æ–≤—ã—Ö –≥–µ—Ä–æ–µ–≤ –∏ —Å–∏—Å—Ç–µ–º—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å NPC. –ò–≥—Ä–∞ –≤—ã–π–¥–µ—Ç –∑–∏–º–æ–π 2025 –≥–æ–¥–∞ –Ω–∞ PS5 –∏ Xbox Series X|S.

–í–∏–¥–µ–æ –¥–ª–∏–ª–æ—Å—å –±–æ–ª–µ–µ 8 –º–∏–Ω—É—Ç –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–æ –∫–∞–∫ —É–ª–∏—á–Ω—É—é –∂–∏–∑–Ω—å –º–µ–≥–∞–ø–æ–ª–∏—Å–∞, —Ç–∞–∫ –∏ –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–µ –ø–µ—Ä–µ—Å—Ç—Ä–µ–ª–∫–∏, –ø–æ–≥–æ–Ω–∏ –∏ –¥–∏–∞–ª–æ–≥–∏. –ì–µ—Ä–æ–∏–Ω—è, –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ ‚Äî –õ—É–Ω–∞, –≤–µ–¥—ë—Ç —Å–µ–±—è —Ö–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω–æ, –∞ –µ—ë –Ω–∞–ø–∞—Ä–Ω–∏–∫ —è–≤–Ω–æ –Ω–µ –¥–æ–≤–µ—Ä—è–µ—Ç –µ–π. –°—é–∂–µ—Ç –æ–±–µ—â–∞–µ—Ç –±—ã—Ç—å –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–º.

Rockstar –≤–ø–µ—Ä–≤—ã–µ —Å–¥–µ–ª–∞–ª–∞ –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –¥–≤–æ–π–Ω–æ–º –ø—Ä–æ—Ç–∞–≥–æ–Ω–∏—Å—Ç–µ, –∏ —ç—Ç–æ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –∫–ª—é—á–µ–≤–æ–π —Ñ–∏—à–∫–æ–π –∏–≥—Ä—ã. –¢–∞–∫–∂–µ –∑–∞–º–µ—Ç–Ω–æ —É–ª—É—á—à–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∏, —Ñ–∏–∑–∏–∫–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.

GTA 6 ‚Äî –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –æ–∂–∏–¥–∞–µ–º—ã—Ö –∏–≥—Ä –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏—è. –ò, —Å—É–¥—è –ø–æ –≥–µ–π–º–ø–ª–µ—é, –æ–Ω–∞ –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è.`,
      author: '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
      date: '14 –æ–∫—Ç—è–±—Ä—è 2024',
      image: 'https://media.contentapi.ea.com/content/dam/apex-legends/common/apex-legends-global-launch/launch-news-header.jpg',
      tags: ['—ç–∫—à–µ–Ω', 'Rockstar', '–æ—Ç–∫—Ä—ã—Ç—ã–π –º–∏—Ä'],
    },
    {
      id: 'cyberpunk-2077',
      title: 'Cyberpunk 2077 ‚Äî —Å–∫–∏–¥–∫–∞ 70%',
      excerpt: '–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ Team Cherry –æ–±—ä—è–≤–∏–ª–∏, —á—Ç–æ Hollow Knight: Silksong –≤—ã–π–¥–µ—Ç 25 –º–∞—Ä—Ç–∞ 2025 –≥–æ–¥–∞. –ò–≥—Ä–∞ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö, –≤–∫–ª—é—á–∞—è Switch –∏ –ü–ö...',
      content: `–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ Team Cherry –æ–±—ä—è–≤–∏–ª–∏, —á—Ç–æ Hollow Knight: Silksong –≤—ã–π–¥–µ—Ç 25 –º–∞—Ä—Ç–∞ 2025 –≥–æ–¥–∞. –ò–≥—Ä–∞ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö, –≤–∫–ª—é—á–∞—è Switch –∏ –ü–ö. –ü–æ–∫–ª–æ–Ω–Ω–∏–∫–∏ –∂–¥–∞–ª–∏ –∞–Ω–æ–Ω—Å–∞ –±–æ–ª–µ–µ 5 –ª–µ—Ç.

Silksong –ø–µ—Ä–µ–Ω–µ—Å—ë—Ç –∏–≥—Ä–æ–∫–æ–≤ –≤ –Ω–æ–≤–æ–µ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ ‚Äî –î–µ–π—Ç–æ–¥—É. –ì–ª–∞–≤–Ω–æ–π –≥–µ—Ä–æ–∏–Ω–µ–π —Å—Ç–∞–Ω–µ—Ç –•–æ—Ä–Ω–∏—Ç, —Å–µ—Å—Ç—Ä–∞ –ú–æ–Ω–∞—Ä—Ö–∞. –ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ñ–∏—Ä–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å –º–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏–∏: —Å–ª–æ–∂–Ω—ã–µ –±–æ—Å—Å—ã, —Å–∫—Ä—ã—Ç—ã–µ –ø–µ—â–µ—Ä—ã, –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å—é–∂–µ—Ç –∏ –ø–æ—Ç—Ä—è—Å–∞—é—â–∞—è –º—É–∑—ã–∫–∞.

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–∫–∞–∑–∞–ª–∏ –≥–µ–π–º–ø–ª–µ–π: –Ω–æ–≤—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –∫–æ–º–±–æ —Å —è–¥–æ–≤–∏—Ç—ã–º–∏ —à–∏–ø–∞–º–∏, –ª–∞–∑–∞–Ω–∏–µ –ø–æ –ø–∞—É—Ç–∏–Ω–µ –∏ —Å—Ä–∞–∂–µ–Ω–∏—è —Å –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–º–∏ –Ω–∞—Å–µ–∫–æ–º—ã–º–∏. –ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ –≥–ª—É–±–∂–µ, –∞ —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç.

Hollow Knight –±—ã–ª–∞ –∫—É–ª—å—Ç–æ–≤–æ–π –∏–≥—Ä–æ–π 2017 –≥–æ–¥–∞. Silksong –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —É—Å–ø–µ—Ö ‚Äî –∏–ª–∏ –¥–∞–∂–µ –ø—Ä–µ–≤–∑–æ–π—Ç–∏ –µ–≥–æ.`,
      author: '–î–º–∏—Ç—Ä–∏–π –°–∏–¥–æ—Ä–æ–≤',
      date: '13 –æ–∫—Ç—è–±—Ä—è 2024',
      image: 'https://cdn.akamai.steamstatic.com/steam/apps/1091500/header.jpg?t=1727639136',
      tags: ['RPG', 'CD Projekt', 'Phantom Liberty', '–∫–∏–±–µ—Ä–ø–∞–Ω–∫'],
    },
  ];

  return (
    <div className="max-w-6xl mx-auto px-4 py-12 grid grid-cols-1 lg:grid-cols-3 gap-8">
      <main className="lg:col-span-2 space-y-8">
        <h1 className="text-3xl font-bold mb-8">üéÆ –†–∞–∑–¥–∞—á–∏ –∏–≥—Ä Steam</h1>
        {steamDeals.map((news) => (
          <article key={news.id} className="card bg-bg-card rounded-2xl p-6 border border-border shadow-lg">
            <div className="flex gap-6 items-center">
              <Link href={`/steam/${news.id}`}>
                <img
                  src={news.image}
                  alt={news.title}
                  width={218}
                  height={124}
                  className="rounded-xl object-cover shadow"
                />
              </Link>
              <div>
                <h2 className="text-xl font-bold mb-2">
                  <Link href={`/steam/${news.id}`} className="hover:text-accent transition">
                    {news.title}
                  </Link>
                </h2>
                <p className="text-muted-foreground text-sm mb-2">
                  {news.date} ‚Ä¢ –ê–≤—Ç–æ—Ä: {news.author}
                </p>
                <p className="text-muted-foreground line-clamp-3 text-sm mb-3">
                  {news.excerpt}
                </p>
                <div className="tags flex flex-wrap gap-2">
                  {news.tags.map((tag) => (
                    <span
                      key={tag}
                      className="tag bg-purple-500/15 text-foreground px-3 py-1 rounded-full text-xs font-semibold border border-purple-500/30 cursor-pointer hover:scale-110 transition"
                      onClick={() => {
                        const newTags = { ...userTags, [tag]: (userTags[tag] || 0) + 1 };
                        setUserTags(newTags);
                        localStorage.setItem('userTags', JSON.stringify(newTags));
                      }}
                    >
                      {tag}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </article>
        ))}
      </main>
      <Sidebar />
    </div>
  );
}